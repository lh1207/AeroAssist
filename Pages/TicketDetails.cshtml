@page
@model AeroAssist.Models.TicketModel
@{
    Layout = "_Layout";
    ViewData["Title"] = "Ticket Details";
}

<div below-nav>
    <h1>Ticket Details</h1>

    @{
        System.Diagnostics.Debug.Assert(Model.Ticket != null, "Model.Ticket != null");
    }

    <button onclick="location.href='@Url.Page("/EditTicket", new { id = Model.Ticket.TicketId})'" type="button" class="btn btn-primary">Edit</button>

    <form method="post"> @* Still posting despite using delete due to form submission *@
        @Html.AntiForgeryToken() @* Needed to delete successfully without blank page. *@
        <input type="hidden" name="_method" value="delete" />
        <input type="hidden" name="id" value="@Model.Ticket.TicketId" />
        <button id="deleteButton" type="submit" onclick="return confirm('Are you sure you want to delete this ticket?');" class="btn btn-primary">Delete</button>
    </form>

    @if (Model.Ticket != null)
    {
        var ticket = Model.Ticket;
        <li><b>TicketId: </b>@ticket.TicketId</li>
        <li><b>Title: </b>@ticket.Title</li>
        <li><b>Description: </b>@ticket.Description</li>
        <li><b>Status: </b>@ticket.Status</li>
        <li><b>Priority: </b>@ticket.Priority</li>
        <li><b>Type: </b>@ticket.Type</li>
        <li><b>Assignee: </b>@ticket.Assignee</li>
        <li><b>Reporter: </b>@ticket.Reporter</li>
        <li><b>Create: </b>@ticket.Created</li>
        <li><b>Updated: </b>@ticket.Updated</li>
        <li><b>Resolution: </b>@ticket.Resolution</li>
        <li><b>Comments: </b>@ticket.Comments</li>
        <li><b>Attachments: </b>@ticket.Attachments</li>
        <li><b>Departments: </b>@ticket.Departments</li>
    }
    <a href="/Ticket">Back to List</a>
    @{
        System.Diagnostics.Debug.Assert(Model.Tickets != null, "Model.Tickets != null");
    }
</div>